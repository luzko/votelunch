/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DROP TABLE votes IF EXISTS
DROP TABLE user_roles IF EXISTS
DROP TABLE meals IF EXISTS
DROP TABLE users IF EXISTS
DROP TABLE restaurants IF EXISTS
DROP SEQUENCE global_seq IF EXISTS
CREATE SEQUENCE global_seq AS INTEGER START WITH 100000
CREATE TABLE users ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, registered TIMESTAMP DEFAULT now() NOT NULL, enabled BOOLEAN DEFAULT TRUE NOT NULL )
CREATE UNIQUE INDEX users_unique_email_idx ON USERS (email)
CREATE TABLE user_roles ( user_id INTEGER NOT NULL, role VARCHAR(255), CONSTRAINT user_roles_idx UNIQUE (user_id, role), FOREIGN KEY (user_id) REFERENCES USERS (id) ON DELETE CASCADE )
CREATE TABLE restaurants ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE meals ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, price DECIMAL(5,2) NOT NULL, date DATE NOT NULL, restaurant_id INTEGER NOT NULL, FOREIGN KEY (restaurant_id) REFERENCES RESTAURANTS (id) ON DELETE CASCADE )
CREATE UNIQUE INDEX meals_unique_user_datetime_idx ON meals (name, restaurant_id, date)
CREATE TABLE votes ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, date_time TIMESTAMP NOT NULL, user_id INTEGER NOT NULL, restaurant_id INTEGER NOT NULL, FOREIGN KEY (user_id) REFERENCES USERS (id) ON DELETE CASCADE, FOREIGN KEY (restaurant_id) REFERENCES RESTAURANTS (id) ON DELETE CASCADE )
CREATE UNIQUE INDEX votes_unique_user_restaurant_idx ON votes (user_id, restaurant_id)
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:39.910000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:39.910000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:39.910000',TRUE)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100003
COMMIT
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100005
COMMIT
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
COMMIT
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100008
COMMIT
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:39.948000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:39.948000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:39.948000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
INSERT INTO USERS VALUES(100010,'New','new@gmail.com','newPass','2020-07-08 20:27:39.954000',FALSE)
INSERT INTO USER_ROLES VALUES(100010,'USER')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100011
COMMIT
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM USER_ROLES WHERE USER_ID=100010 AND ROLE='USER'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM USERS WHERE ID=100010
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.162000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.162000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.162000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DELETE FROM USERS WHERE ID=100000
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM VOTES WHERE ID=100008
COMMIT
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.190000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.190000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.190000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.252000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.252000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.252000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DELETE FROM USERS WHERE ID=100000
INSERT INTO USERS VALUES(100000,'UpdatedName','user1@yandex.ru','password','2020-07-08 20:27:39.954000',TRUE)
COMMIT
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.276000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.276000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.276000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.286000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.286000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.286000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.298000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.298000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.298000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.309000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.309000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.309000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
DELETE FROM VOTES WHERE ID=100008
DELETE FROM VOTES WHERE ID=100009
DELETE FROM USER_ROLES WHERE USER_ID=100000 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100001 AND ROLE='USER'
DELETE FROM USER_ROLES WHERE USER_ID=100002 AND ROLE='ADMIN'
DELETE FROM MEALS WHERE ID=100005
DELETE FROM MEALS WHERE ID=100006
DELETE FROM MEALS WHERE ID=100007
DELETE FROM USERS WHERE ID=100000
DELETE FROM USERS WHERE ID=100001
DELETE FROM USERS WHERE ID=100002
DELETE FROM RESTAURANTS WHERE ID=100003
DELETE FROM RESTAURANTS WHERE ID=100004
COMMIT
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User1','user1@yandex.ru','password','2020-07-08 20:27:40.326000',TRUE)
INSERT INTO USERS VALUES(100001,'User2','user2@mail.ru','pass','2020-07-08 20:27:40.326000',TRUE)
INSERT INTO USERS VALUES(100002,'Admin1','admin@gmail.com','admin','2020-07-08 20:27:40.326000',TRUE)
INSERT INTO RESTAURANTS VALUES(100003,'Restaurant1')
INSERT INTO RESTAURANTS VALUES(100004,'Restaurant2')
INSERT INTO USER_ROLES VALUES(100000,'USER')
INSERT INTO USER_ROLES VALUES(100001,'USER')
INSERT INTO USER_ROLES VALUES(100002,'ADMIN')
INSERT INTO MEALS VALUES(100005,'Meal1',2.20,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100006,'Meal2',3.30,'2020-07-07',100003)
INSERT INTO MEALS VALUES(100007,'Meal3',4.40,'2020-07-07',100004)
INSERT INTO VOTES VALUES(100008,'2020-07-07 10:00:00.000000',100000,100003)
INSERT INTO VOTES VALUES(100009,'2020-07-07 11:00:00.000000',100001,100004)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100010
COMMIT
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100011
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
DISCONNECT
